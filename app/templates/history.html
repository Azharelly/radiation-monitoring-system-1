<!DOCTYPE html>
<html>
<head>
    <title>Radiation History</title>
</head>
<body>

<h1>Radiation History</h1>

<p id="status">Loading records...</p>

<table border="1" cellpadding="8">
    <thead>
        <tr>
            <th>Sensor ID</th>
            <th>Radiation Level</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody id="history-table"></tbody>
</table>

<script>
async function loadHistory() {
    try {
        const response = await fetch("/api/logs");
        const data = await response.json();

        const table = document.getElementById("history-table");
        const status = document.getElementById("status");

        table.innerHTML = "";

        if (data.length === 0) {
            status.innerText = "No records yet.";
            return;
        }

        status.innerText = "";

        data.forEach(log => {
            const row = document.createElement("tr");

            row.innerHTML = `
                <td>${log.sensor_id}</td>
                <td>${log.radiation_level}</td>
                <td>${log.timestamp}</td>
            `;

            table.appendChild(row);
        });

    } catch (error) {
        document.getElementById("status").innerText = "Error loading data.";
        console.error(error);
    }
}

loadHistory();
</script>

</body>
</html>
